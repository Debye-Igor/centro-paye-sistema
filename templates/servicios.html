{% extends "base.html" %}

{% block title %}Servicios - Centro Paye{% endblock %}
{% block page_title %}Servicios{% endblock %}

{% block content %}
<div class="content">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h2>Lista de Servicios</h2>
        <a href="{{ url_for('servicios.nuevo_servicio') }}" class="btn-primary">Nuevo Servicio</a>

    </div>

    <table class="data-table">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Especialidad</th>
                <th>Duración</th>
                <th>Precio</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for servicio in servicios %}
            <tr>
                <td>{{ servicio.nombre }}</td>
                 <td>{{ servicio.especialidad_codigo or '-' }}</td>
                <td>{{ servicio.duracion }} min</td>
                <td>${{ "{:,}".format(servicio.precio) }}</td>
                <td>{{ servicio.estado|title }}</td>
                <td>
                <a href="{{ url_for('servicios.editar_servicio', servicio_id=servicio.id) }}" class="btn-secondary">Editar</a>
                    <button onclick="eliminarServicio('{{ servicio.id }}', '{{ servicio.nombre }}')" class="btn-eliminar">Eliminar</button>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="no-data">No hay servicios registrados</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
function eliminarServicio(id, nombre) {
    if (confirm(`¿Está seguro de eliminar el servicio "${nombre}"?\n\nEsta acción no se puede deshacer.`)) {
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = `/servicios/${id}/eliminar`;
        
        document.body.appendChild(form);
        form.submit();
    }
}
</script>
{% endblock %}